<head>
    <title>GEM LABO PHYSIQUE</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="./styles/main.css" as="main">
    <link rel="stylesheet" type="text/css" href="./styles/form/login.css" as="login">
</head>
<body>
    <div id="wrap">
        <div id="header">
            <h1>GEM LABO PHYSIQUE</h1>
        </div>
        <main id="logincontent" class="container">
            <div id="errormsg">
                <div class="message message-warning alert alert-warning">
                    <span id="alert_login">Identification nécessaire</span>
                </div>
            </div>
            <div class="card">
                <div class="create-account">
                    <a class="create-account-link" href="signup.html">Créer un compte</a>
                </div>
                <form action="/loginhandler" class="login" id="login" method="post">
                    <div class="form">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><label for="username"><i class="fa fa-user"></i></label></span>
                            </div>
                            <input id="username" name="username" type="text" class="form-control" value="" placeholder="Identifiant" required/>
                        </div>
                        <div class="forgot-password">
                            <a class="forgot-password-link" href="#">Mot de passe oublié ?</a>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><label for="password"><i class="fa fa-lock"></i></label></span>
                            </div>
                            <input id="password" name="password" type="password" class="form-control" placeholder="Mot de passe" required/>
                        </div>
                        <button type="submit" class="btn" id="btn" >
                            <span class="fa fa-sign-in"></span>
                            <span trspan="connect">Connexion</span>
                        </button>
                    </div>
                </form>
            </div>
        </main>
    <div>
</body>

<script type="text/javascript">
    const btn = document.getElementById('btn');

    btn.addEventListener('click', function() {
        let isValid = validateForm();

        if (isValid)
            console.log('Form is ready to submit.');
        }
    );

    function validateForm() {
        let formToValidate = document.getElementById('login');
        let elements = formToValidate.elements;

        for (let i = 0; i < elements.length; i++) {
            if (elements[i].type == 'text') {
                let invalid = elements[i].value.length == 0;

                console.log(invalid);
                if (invalid) {
                    elements[i].setCustomValidity('L\'identifiant n\'est pas valide');
                    return false;
                }else{
                    elements[i].setCustomValidity('');
                }
            }

            if(elements[i].type == 'password'){
                let invalid = elements[i].value.length == 0;

                if (invalid) {
                    elements[i].setCustomValidity('Le mot de passe n\'est pas valide');
                    return false;
                }else{
                    elements[i].setCustomValidity('');
                }
            }
        }
        return true;
    }
</script>